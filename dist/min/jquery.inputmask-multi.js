/*
 Input Mask plugin for jquery
 http://github.com/RobinHerbots/jquery.inputmask
 Copyright (c) 2010 - 2014 Robin Herbots
 Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 Version: 3.0.59
*/
(function(b){"function"===typeof define&&define.amd?define("jquery.inputmask-multi",["jquery","jquery.inputmask"],b):b(jQuery)})(function(b){if(void 0!=b.fn.inputmask){var s=function(d,m,k){function s(a){var b=document.createElement("input");a="on"+a;var e=a in b;e||(b.setAttribute(a,"return;"),e="function"==typeof b[a]);return e}function v(a){if(void 0==b.valHooks[a]||!0!=b.valHooks[a].inputmaskmultipatch){var g=b.valHooks[a]&&b.valHooks[a].get?b.valHooks[a].get:function(b){return b.value},e=b.valHooks[a]&&
b.valHooks[a].set?b.valHooks[a].set:function(b,a){b.value=a;return b};b.valHooks[a]={get:function(a){var e=b(a);return e.data("_inputmask-multi")?(a=e.data("_inputmask-multi"),g(a.elmasks[a.activeMasksetIndex])):g(a)},set:function(a,g){var c=b(a),d=e(a,g);c.data("_inputmask-multi")&&c.triggerHandler("setvalue");return d},inputmaskmultipatch:!0}}}function p(a,g,e){a=a.jquery&&0<a.length?a[0]:a;if("number"==typeof g){g=q(g);e=q(e);e="number"==typeof e?e:g;if(a!=c){var n=b(a).data("_inputmask")||{};
n.caret={begin:g,end:e};b(a).data("_inputmask",n)}b(a).is(":visible")&&(a.scrollLeft=a.scrollWidth,!1==k.insertMode&&g==e&&e++,a.setSelectionRange?(a.selectionStart=g,a.selectionEnd=e):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",g),a.select()))}else return n=b(a).data("_inputmask"),!b(a).is(":visible")&&n&&void 0!=n.caret?(g=n.caret.begin,e=n.caret.end):a.setSelectionRange?(g=a.selectionStart,e=a.selectionEnd):document.selection&&document.selection.createRange&&
(a=document.selection.createRange(),g=0-a.duplicate().moveStart("character",-1E5),e=g+a.text.length),g=q(g),e=q(e),{begin:g,end:e}}function q(a){!u||"number"!=typeof a||k.greedy&&""==k.placeholder||(a=c.value.length-a);return a}function r(a,g){if("multiMaskScope"!=a){if(b.isFunction(k.determineActiveMasksetIndex))l=k.determineActiveMasksetIndex.call(f,a,g);else{var e=-1,n=-1,d=-1;b.each(g,function(a,g){var c=b(g).data("_inputmask").maskset,f=-1,k=0,h=p(g).begin,m;for(m in c.validPositions)c=parseInt(m),
c>f&&(f=c),k++;if(k>e||k==e&&n>h&&d>f||k==e&&n==h&&d<f)e=k,n=h,l=a,d=f})}var h=f.data("_inputmask-multi")||{activeMasksetIndex:0,elmasks:g};h.activeMasksetIndex=l;f.data("_inputmask-multi",h)}-1==b.inArray(a,["focus"])&&c.value!=g[l]._valueGet()&&(h=""==b(g[l]).val()?g[l]._valueGet():b(g[l]).val(),c.value=h);-1==b.inArray(a,["blur","focus"])&&b(g[l]).hasClass("focus-inputmask")&&(h=p(g[l]),p(c,h.begin,h.end))}function w(a){c=a;f=b(c);u="rtl"==c.dir||k.numericInput;l=0;h=b.map(m,function(a,e){var c=
'<input type="text" ';f.attr("value")&&(c+='value="'+f.attr("value")+'" ');f.attr("dir")&&(c+='dir="'+f.attr("dir")+'" ');c=b(c+"/>")[0];b(c).inputmask(b.extend({},k,{mask:a.mask}));return c});f.data("_inputmask-multi",{activeMasksetIndex:0,elmasks:h});("rtl"==c.dir||k.rightAlign)&&f.css("text-align","right");c.dir="ltr";f.removeAttr("dir");""!=f.attr("value")&&r("init",h);f.bind("mouseenter blur focus mouseleave click dblclick keydown keypress keypress",function(a){var e=p(c),d,f=!0;if("keydown"==
a.type){d=a.keyCode;if(d==k.keyCode.DOWN&&l<h.length-1)return l++,r("multiMaskScope",h),!1;if(d==k.keyCode.UP&&0<l)return l--,r("multiMaskScope",h),!1;if(a.ctrlKey||d==k.keyCode.SHIFT||a.altKey)return!0}else if("keypress"==a.type&&(a.ctrlKey||d==k.keyCode.SHIFT||a.altKey))return!0;b.each(h,function(c,h){if("keydown"==a.type){d=a.keyCode;if(d==k.keyCode.BACKSPACE&&h._valueGet().length<e.begin)return;if(d==k.keyCode.TAB)f=!1;else{if(d==k.keyCode.RIGHT){p(h,e.begin+1,e.end+1);f=!1;return}if(d==k.keyCode.LEFT){p(h,
e.begin-1,e.end-1);f=!1;return}}}if(-1!=b.inArray(a.type,["click"])&&(p(h,q(e.begin),q(e.end)),e.begin!=e.end)){f=!1;return}-1!=b.inArray(a.type,["keydown"])&&e.begin!=e.end&&p(h,e.begin,e.end);b(h).triggerHandler(a)});f&&setTimeout(function(){r(a.type,h)},0)});f.bind(x+" dragdrop drop setvalue",function(a){p(c);setTimeout(function(){b.each(h,function(e,d){d._valueSet(c.value);b(d).triggerHandler(a)});setTimeout(function(){r(a.type,h)},0)},0)});v(c.type)}var x=s("paste")?"paste":s("input")?"input":
"propertychange",u,c,f,h,l;k.multi=!0;if(void 0!=d)switch(d.action){case "isComplete":return f=b(d.el),d=f.data("_inputmask-multi"),d=d.elmasks[d.activeMasksetIndex],b(d).inputmask("isComplete");case "unmaskedvalue":return f=d.$input,d=f.data("_inputmask-multi"),d=d.elmasks[d.activeMasksetIndex],b(d).inputmask("unmaskedvalue");case "mask":w(d.el);break;case "remove":c=d.el;f=b(c);maskset=f.data("_inputmask").maskset;k=f.data("_inputmask").opts;c._valueSet(unmaskedvalue(f));f.unbind(".inputmask");
f.removeClass("focus-inputmask");f.removeData("_inputmask");var t;Object.getOwnPropertyDescriptor&&(t=Object.getOwnPropertyDescriptor(c,"value"));t&&t.get?c._valueGet&&Object.defineProperty(c,"value",{get:c._valueGet,set:c._valueSet}):document.__lookupGetter__&&c.__lookupGetter__("value")&&c._valueGet&&(c.__defineGetter__("value",c._valueGet),c.__defineSetter__("value",c._valueSet));try{delete c._valueGet,delete c._valueSet}catch(y){c._valueGet=void 0,c._valueSet=void 0}}};b.extend(b.inputmask.defaults,
{multi:!1,determineActiveMasksetIndex:void 0});b.inputmask._fn=b.fn.inputmask;b.fn.inputmask=function(d,m){if("string"===typeof d)return b.inputmask._fn("_detectScope",m,void 0,void 0,d)?b.inputmask._fn.call(this,d,m,s,"_inputmask-multi"):b.inputmask._fn.call(this,d,m);if("object"==typeof d)return b.inputmask._fn("_detectScope",d)?b.inputmask._fn.call(this,d,m,s,"_inputmask-multi"):b.inputmask._fn.call(this,d,m);if(void 0==d)return b.inputmask._fn.call(this,d,m)}}});
